<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Platformer Design Tool</title>
  <meta name="description" content="Plan and test your platformer levels" />
  
  <link rel="stylesheet" href="src/style.css">
</head>

<body>
  <div id="stars"></div>

  <nav class="navbar">
    <div class="nav-container">
      <div class="left-dropdown"> <!-- NOT ACTUALLY A DROP DOWN AT THE MOMENT - KEEPING THE DROP DOWN TAG FOR FUTURE PLANS -->
          <img src="/sprites/Niels2.png" alt="Menu" class="nav-niels">
      </div>
       <a href="https://mkb0020.github.io"> <!-- PLACEHOLDER -->
            <div class="logo">♡ ACOUSTIC KITTY ♡</div>
        </a>
      <div class="help-dropdown">
        <button class="help-icon" id="helpBtn" aria-label="Help Menu">
          <div class="question-mark">?</div>
        </button>
        <div class="dropdown-menu" id="dropdownMenu">
          <button id="openMainHelp">GUIDE</button>
          <button id="openGuide">SUPPORT</button>
        </div>
      </div>
    </div>
  </nav>

  <div class="grid-controls">
      <button id="toggleGridPanel" class="panel-toggle" title="Toggle Grid Controls">
        <img src="public/sprites/controls.gif" alt="CONTROLS" class="controls-gif">
      </button>
    <div class="grid-controls-content">
      <div class="control-row">
          <span class="divider-label">CANVAS </span>
      </div>
        <div class="control-row">
          <label class="toggle-label">
            <span>Grid</span>
            <input type="checkbox" id="gridToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="control-row">
          <label for="gridSize">Grid Size: <span id="gridSizeValue">50</span>px</label>
          <input type="range" id="gridSize" min="10" max="100" value="50" step="10">
        </div>
        <div class="control-row">
          <label class="toggle-label">
            <span>Mouse Coords </span>
            <input type="checkbox" id="coordsToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      <div class="control-row">
          <span class="divider-label">jump arcs </span>
      </div>
      <div class="control-row">
        <label class="toggle-label">
          <span>Predict (press Keys "m" and "n") </span>
          <input type="checkbox" id="arcStandingToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="control-row">
        <label class="toggle-label">
          <span>Predict (anchored to sprite) </span>
          <input type="checkbox" id="arcMovingToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="control-row">
        <label class="toggle-label">
          <span>Recorded Arc </span>
          <input type="checkbox" id="arcRecordedToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>
  </div>

  <div class="notes-panel">
    <button id="toggleNotesPanel" class="panel-toggle" title="Toggle Notes"><img src="public/sprites/pencil2.png" alt="NOTES" class="pencil-img"></button>
  <div class="notes-content">
    <div class="control-row">
    </div>
    <textarea 
      id="levelNotes" 
      placeholder="Add notes about your level design here... (exports with JSON)"
      style="width: 100%; min-height: 200px; background: rgba(10, 10, 10, 0.8); color: #67FEBD; border: 1px solid rgba(103, 254, 189, 0.3); border-radius: 5px; padding: 10px; font-family: 'Orbitron', monospace; font-size: 12px; resize: vertical;"
    ></textarea>
  </div>
</div>

  <div class="container">
      <div class="tab-container">
        <!--CHANGE THESE TO SMALLER ICONS RATHER THAN BIG  BUTTONS-->
        <button class="tab-button active" data-tab="map">LEVEL PLANNER</button> 
        <button class="tab-button" data-tab="physics">PHYSICS TESTER</button>
        <button class="tab-button" data-tab="PLACEHOLDER">BACK TO MENU</button>
      </div>

      <div id="mapTab" class="tab-content active">
        <div class="canvas-container">
          <canvas id="mapCanvas" width="1000" height="480"></canvas>
          <div class="hint"></div>
        </div>

        <div class="inputs-wrapper">
          <div class="input-box">
            <h2>Level Settings</h2>
            <div class="control-group">
              <label for="levelLength">Level Length (px)</label>
              <input id="levelLength" type="number" value="10000" min="1000" step="100">
            </div>
            <div class="control-group">
              <label for="numPlatforms"># of Platforms</label>
              <input id="numPlatforms" type="number" value="3" min="0">
            </div>
            <div class="control-group">
              <label for="numGroundSegments"># of Ground Segments</label>
              <input id="numGroundSegments" type="number" value="2" min="0">
            </div>
            
          <div style="margin-top: 20px;">
            <label>Number of Zones:</label>
            <input type="number" id="numZones" min="0" max="20" value="0" style="width: 100%;">
          </div>

          <div id="dynamicZones" style="margin-top: 15px;"></div>


            <div class="control-group">
              <label for="platformColor">Platform Color</label>
              <div class="color-select-wrapper">
                <select id="platformColor">
                  <option value="#830cde">Vortex Violet</option>
                  <option value="#830CDE">Plasma Purple</option>
                  <option value="#dc4ce8" selected>Nuclear Fuscia</option>
                  <option value="#FFC7FF">Particle Pink</option>
                  <option value="#67FEBD">Alpha Aqua</option>
                  <option value="#00ffff">Aqua Aura</option>
                  <option value="#58e84c">Radioactive Green</option>
                  <option value="#FFFFFF">White</option>
                  <option value="#37025a">Proton Purple</option>
                  <option value="#170032">Boson Blue</option>
                  <option value="#F3FFE5">Halflife Lime</option>
                  <option value="#9090C0">Grey-Blue Duality</option>
                  <option value="#DBE2E9">Gamma Grey</option>
                  <option value="#8391A1">Gravity Grey</option>
                  <option value="#2A3439">Dark Matter Grey</option>
                </select>
                <div id="platformSwatch" class="color-swatch" style="background: #dc4ce8;"></div>
              </div>
            </div>

            <div class="control-group">

            </div>
          </div>

          <div class="input-box">
            <h2>Platforms & Holes</h2>
            
            <div class="control-group">
              <label>Upload JSON (Optional)</label>
              <input type="file" id="jsonUpload" accept=".json,.txt">
            </div>

            <div id="dynamicInputs"></div>
  
            <button id="generateLevel">GENERATE LEVEL</button>
            <button id="previewLevel">PREVIEW FULL LEVEL</button>
            <button id="exportJson">EXPORT JSON</button>
            <button id="resetLevel" class="button">RESET LEVEL</button>
          </div>
        </div>
      </div>

      <div id="physicsTab" class="tab-content">
        <div class="canvas-container">
          <canvas id="physicsCanvas" width="1000" height="480"></canvas>
          <div class="hint"></div>
        </div>

        <div class="inputs-wrapper">
          <div class="input-box">
            <h2>Physics Settings</h2>
            <div class="control-group">
              <label for="gravity">Gravity</label>
              <input id="gravity" type="number" value="1600" step="0.1" min="0.1">
            </div>
            <div class="control-group">
              <label for="jumpForce">Jump Force</label>
              <input id="jumpForce" type="number" value="780" step="1" min="1">
            </div>
            <div class="control-group">
              <label for="speed">Move Speed</label>
              <input id="speed" type="number" value="250" step="1" min="1">
            </div>
          </div>

          <div class="input-box">
            <h2>Character Size</h2>
            <div class="control-group">
              <label for="spriteW">Width (1-200)</label>
              <input type="number" id="spriteW" value="150" min="1" max="200">
            </div>
            <div class="control-group">
              <label for="spriteH">Height (1-200)</label>
              <input type="number" id="spriteH" value="108" min="1" max="200">
            </div>

            <button id="loadPhysics">LOAD & TEST PHYSICS</button>
            <button id="resetPlayer">RESET PLAYER</button>
          </div>
        </div>
      </div>

  <div id="scroll-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'});">
          <a href="javascript:void(0);" class="button-container" aria-label="Scroll to top">
              <img src="/sprites/top.png" alt="Scroll to top">
          </a>
  </div>

  </div>

  <div id="helpModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title">PLATFORMER PLANNER</h1>
          <button class="modal-close" id="closeModal">X</button>
        </div>
        <div class="modal-body">
          <h3>PLACEHOLDER</h3>
          <p>Plan out platformer levels!</p>
          
          <h3>Tabs:</h3>
          <ul>
            <li><strong>Tab 1 - Level Planner:</strong> upload json or input platform and hole locations to plan your level</li>
            <li><strong>Tab 2 - Physics Tester:</strong> test your plannned level with your game physics</li>
          </ul>

          <h3>Controls:</h3>
          <ul>
            <li><strong>Grid:</strong> ...</li>
            <li><strong>Mouse Coordinates:</strong> ...</li>
            <li><strong>Jump Arcs:</strong> ...</li>
          </ul>
        </div>
      </div>
  </div>

  <div id="guideModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title">SUPPORT</h1>
          <button class="modal-close" id="closeGuide">X</button>
        </div>
        <div class="modal-body">
          <h3>PLACEHOLDER</h3>
          <p>Report issues at https://mkb0020.vercel.app/support</p>
        </div>
      </div>
  </div>

  <script type="module" src="src/main.js"></script>
  <script src="src/ui.js"></script>
</body>
</html>